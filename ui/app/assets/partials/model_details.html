<breadcrumb path="path"></breadcrumb>
<h2>
  {{ model.name|capfirst }} Details
  <a class="actions">
    <span ng-click="test(model)" class="btn">
      <i title="Apply the classifier to the input provided by the data import handler"  class="status-icon icon-play"></i>
      <small> TODO: run test</small>
    </span>
</a>
</h2>

<ul class="nav nav-tabs" id="tabs">
  <li  ng-class="{active: action[0] == 'model'}"><a ng-click="action = ['model', 'details']">Details</a></li>
  <li ng-class="{active: action[0] == 'weights'}"><a  ng-click="action = ['weights', 'file']">Parameters Weights</a></li>
  <li ng-class="{active: action[0] == 'test'}"><a  ng-click="action = ['test', 'list']">Tests</a></li>
  <li ng-class="{active: action[0] == 'features'}"><a ng-click="action = ['features', 'file']">Features</a></li>
  <li ng-class="{active: action[0] == 'import_handler'}"><a  ng-click="action = ['import_handler', 'file']">Import Handler</a></li>
</ul>
 
<div class="tab-content">
  <div ng-show="action[0] == 'model'" id="details">
    <div class="row">
        <div class="span6">
            <div>
                Created at:
                <span class="value">
                    {{ model.created_on|format_date }}
                </span>
            </div>
            <div class="block" ng-show="latest_test">
                <b>
                  Latest Test: <a class="value" href="#/models/{{ model.name }}/tests/{{ latest_test.name }}">{{ latest_test.name }}</a>
                </b>
                <div>
                  <a class="label">
                    <i class="icon-tag icon-white"></i>
                    <span class="accuracy ng-binding">{{ latest_test.accuracy }}
                    </span>
                  </a>
                  <span ng-repeat="(key, val) in latest_test.parameters">
                  <a class="label">
                    <i class="icon-tag icon-white"></i>
                    <span class="accuracy ng-binding">{{ key }} = {{ val }}
                    </span>
                  </a>
                  <span>
                </div>
            </div>
        </div>
    </div>
  </div>

  <div ng-show="action[0] == 'test'" id="tests" ng-controller="ObjectListCtrl">
    <h3>Tests</h3>
    <ng-include src="'/partials/test_list.html'"></ng-include>
  </div>
  <div  ng-show="action[0] == 'weights'" id="weights">
    <div class="row">
        <div class="span12">
              <div class="row">
              <div class="span5">
                <h4>Positive Weights</h4>
                <div><a><b>List</b></a> | <a>Tree - todo</a></div>
                <weights-table weights="model.positive_weights">
                </weights-table>
              </div>
              <div class="offset1 span5">
                <h4>Negative Weights</h4>
                <div><a><b>List</b></a> | <a>Tree - todo</a></div>
                <weights-table weights="model.negative_weights">
                </weights-table>
              </div>
            </div>
        </div>
    </div>
  </div>
  <div ng-show="action[0] == 'import_handler'" id="import_handler">
    <span ng-click="saveImportHandlerChanges()"
        ng-show="importHandlerChanged"
        class="btn btn-primary">Save</span>
    <textarea ui-codemirror="{ mode: {name: 'javascript', json: true} }" ng-model="model.importhandler"> </textarea>
  </div>
  <div ng-show="action[0] == 'features'"  id="features">
    <textarea ui-codemirror="{ mode: {name: 'javascript', json: true} }" ng-model="model.features"> </textarea>
  </div>
</div>