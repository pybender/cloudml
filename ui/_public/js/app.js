"use strict";var App;App=angular.module("app",["ui","ngCookies","ngResource","app.config","app.controllers","app.directives","app.filters","app.services","ui.bootstrap"]),App.config(["$routeProvider","$locationProvider",function(e,t,n){return e.when("/models",{templateUrl:"/partials/model_list.html",controller:"Model_list"}).when("/models/:name",{controller:"ModelDetailsCtrl",templateUrl:"/partials/model_details.html"}).when("/models/:name/tests/:test_name",{controller:"TestDetailsCtrl",templateUrl:"/partials/test_details.html"}).when("/models/:name/tests/:test_name/examples",{controller:"TestExamplesCtrl",templateUrl:"/partials/test_examples.html"}).when("/models/:name/tests/:test_name/example/:data_id",{controller:"ExampleDetailsCtrl",templateUrl:"/partials/example_details.html"}).when("/upload_model",{templateUrl:"/partials/upload_model.html",controller:"UploadModelCtl"}).when("/add_model",{templateUrl:"/partials/add_model.html",controller:"AddModelCtl"}).otherwise({redirectTo:"/models"}),t.html5Mode(!1)}]),App.run(["$rootScope",function(e){return e.Math=window.Math,e.includeLibraries=!0,e.include=function(e){var t,n;n=this;for(t in e)n[t]=getLibrary(t);return n}}]),"use strict";var SETTINGS;SETTINGS={apiUrl:"http://127.0.0.1:5000/cloudml/b/v1/",apiRequestDefaultHeaders:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":null}},angular.module("app.config",[]).config(["$provide",function(e){var t,n;try{angular.module("app.local_config")}catch(r){console.warn("Couldn't find local settings: "+r.message),angular.module("app.local_config",[]).constant("settings",{})}return n=angular.injector(["app.local_config"]),t=n.get("settings"),e.constant("settings",$.extend(SETTINGS,t))}]),"use strict";var API_URL;API_URL="http://127.0.0.1:5000/cloudml/b/v1/",angular.module("app.controllers",["app.config"]).controller("AppCtrl",["$scope","$location","$resource","$rootScope","settings",function(e,t,n,r,i){return e.$location=t,e.$watch("$location.path()",function(t){return e.activeNavId=t||"/"}),e.getClass=function(t){return e.activeNavId.substring(0,t.length)===t?"active":""}}]).controller("TestDialogController",["$scope","$http","dialog","settings",function(e,t,n,r){var i;return i=n.model,e.params=i.import_params,e.parameters={},e.close=function(){return n.close()},e.start=function(s){var o,u;o=new FormData;for(u in e.parameters)o.append(u,e.parameters[u]);return t({method:"POST",url:r.apiUrl+("model/"+i.name+"/test/test"),data:o,headers:{"Content-Type":void 0,"X-Requested-With":null},transformRequest:angular.identity}).success(function(t,r,i,o){return e.success=!0,e.msg={},n.close(s)}).error(function(t,n,r,i){return e.httpError=!0})}}]).controller("Model_list",["$scope","$http","$dialog","settings",function(e,t,n,r){return e.path=[{label:"Home",url:"#/"},{label:"Models",url:"#/models"}],t({method:"GET",url:r.apiUrl+"model",headers:{"X-Requested-With":null}}).success(function(t,n,r,i){return e.models=t.models}).error(function(t,n,r,i){return e.error=t}),e.test=function(e){var t;return t=n.dialog({modalFade:!1}),t.model=e,t.open("partials/modal.html","TestDialogController")}}]).controller("AddModelCtl",["$scope","$http","$location","settings",function(e,t,n,r){return e.path=[{label:"Home",url:"#/"},{label:"Train Model",url:"#/add_model"}],e.upload=function(){var i;return i=new FormData,i.append("import_handler_local",e.import_handler_local),i.append("features",e.features),t({method:"POST",url:r.apiUrl+("model/train/"+e.name),data:i,headers:{"Content-Type":void 0,"X-Requested-With":null},transformRequest:angular.identity}).success(function(t,r,i,s){return e.msg=t.name,n.path("/models")})},e.setImportHandlerLocalFile=function(t){return e.$apply(function(e){return e.msg="",e.error="",e.import_handler_local=t.files[0]})},e.setFeaturesFile=function(t){return e.$apply(function(e){return e.msg="",e.error="",e.features=t.files[0]})}}]).controller("UploadModelCtl",["$scope","$http","$location","settings",function(e,t,n,r){return e.path=[{label:"Home",url:"#/"},{label:"Upload Trained Model",url:"#/upload_model"}],e.upload=function(){var i;return i=new FormData,i.append("file",e.file),i.append("import_handler_local",e.import_handler_local),i.append("features",e.features),t({method:"POST",url:r.apiUrl+("model/"+e.name),data:i,headers:{"Content-Type":void 0,"X-Requested-With":null},transformRequest:angular.identity}).success(function(t,r,i,s){return e.msg=t.name,n.path("/models")})},e.setFile=function(t){return e.$apply(function(e){return e.msg="",e.error="",e.file=t.files[0]})},e.setImportHandlerLocalFile=function(t){return e.$apply(function(e){return e.msg="",e.error="",e.import_handler_local=t.files[0]})},e.setFeaturesFile=function(t){return e.$apply(function(e){return e.msg="",e.error="",e.features=t.files[0]})}}]).controller("ModelDetailsCtrl",["$scope","$http","$routeParams","$dialog","settings",function(e,t,n,r,i){return e.path=[{label:"Home",url:"#/"},{label:"Models",url:"#/models"},{label:"Model Details",url:""}],t({method:"GET",url:i.apiUrl+("model/"+n.name),headers:{"X-Requested-With":null}}).success(function(t,n,r,i){return e.model=t.model,e.tests=t.tests}).error(function(t,n,r,i){return e.error=t,e.httpError=!0}),e.showWeightsTab=function(){return e.weights={positive:e.model.positive_weights,negative:e.model.negative_weights}},e.test=function(e){var t;return t=r.dialog({modalFade:!1}),t.model=e,t.open("partials/modal.html","TestDialogController")}}]).controller("TestDetailsCtrl",["$scope","$http","$routeParams","settings",function(e,t,n,r){return e.path=[{label:"Home",url:"#/"},{label:"Models",url:"#/models"},{label:"Model Details",url:""},{label:"Test Details",url:""}],t({method:"GET",url:r.apiUrl+("model/"+n.name+"/test/"+n.test_name),headers:{"X-Requested-With":null}}).success(function(t,n,r,i){return e.test=t.test,e.metrics=t.metrics,e.model=t.model}).error(function(t,n,r,i){return e.error=t})}]).controller("TestExamplesCtrl",["$scope","$http","$routeParams","settings",function(e,t,n,r){return e.path=[{label:"Home",url:"#/"},{label:"Models",url:"#/models"},{label:"Model Details",url:"#/models/"+n.name},{label:"Test Details",url:"#/models/"+n.name+"/tests/"+n.test_name},{label:"Test Examples",url:""}],e.currentPage=1,e.$watch("currentPage",function(i,s,o){return t({method:"GET",url:r.apiUrl+("model/"+n.name+"/test/"+n.test_name+"/data?page="+i),headers:{"X-Requested-With":null}}).success(function(t,n,r,i){return e.data=t.data,e.test=t.test,e.model=t.model}).error(function(t,n,r,i){return e.error=t})},!0)}]).controller("ExampleDetailsCtrl",["$scope","$http","$routeParams","settings",function(e,t,n,r){return e.path=[{label:"Home",url:"#/"},{label:"Models",url:"#/models"},{label:"Model Details",url:""},{label:"Test Details",url:""},{label:"Test Examples",url:""},{label:"Example Details",url:""}],t({method:"GET",url:r.apiUrl+("model/"+n.name+"/test/"+n.test_name+"/")+("data/"+n.data_id),headers:{"X-Requested-With":null}}).success(function(t,n,r,i){return e.data=t.data,e.test=t.test,e.model=t.model}).error(function(t,n,r,i){return e.error=t})}]),"use strict";var createSVG,updateGraphPrecisionRecallCurve,updateGraphRocCurve,zip;angular.module("app.directives",["app.services"]).directive("appVersion",["version",function(e){return function(t,n,r){return n.text(e)}}]).directive("breadcrumb",function(){return{restrict:"E",template:"<div><ul class='breadcrumb'><li ng-repeat='node in path'><a ng-href='{{node.url}}'>{{node.label}}</a><span class='divider'>/</span></li></ul><div ng-transclude></div></div>",replace:!0,transclude:!0,scope:{path:"="}}}).directive("weightsTable",function(){return{restrict:"E",template:'<table>                      <thead>                        <tr>                          <th>Paremeter</th>                          <th>Weight</th>                        </tr>                      </thead>                      <tbody>                        <tr ng-repeat="row in weights">                          <td>{{ row.name }}</td>                          <td>                            <div class="badge" ng-class="row.css_class">                              {{ row.weight }}</div>                          </td>                        </tr>                      </tbody>                    </table>',replace:!0,transclude:!0,scope:{weights:"="}}}).directive("recursive",["$compile",function(e){return{restrict:"EACM",priority:1e5,compile:function(t,n){var r,i;return i=t.contents().remove(),r=void 0,function(t,n,s){if(t.row.full_name)return;return r||(r=e(i)),n.append(r(t,function(e){return e}))}}}}]).directive("tree",[function(){return{scope:{tree:"="},transclude:!0,template:'<ul>\n          <li ng-repeat="(key, row) in tree" >\n            {{ key }}\n            <a ng-show="!row.value" ng-click="show=!show"\n              ng-init="show=false">\n<i ng-class="{false:\'icon-arrow-right\',true:\'icon-arrow-down\'}[show]"></i>\n            </a>\n            <span class="{{ row.css_class }}">{{ row.value }}</span>\n            <recursive ng-show="show">\n              <span tree="row"></span>\n            </recursive>\n          </li>\n        </ul>',compile:function(){return function(){}}}}]).directive("scRocCurve",[function(){return{restrict:"E",scope:{metrics:"="},link:function(e,t,n){return createSVG(e,t),e.$watch("metrics",updateGraphRocCurve,!0)}}}]).directive("scPrecisionRecallCurve",[function(){return{restrict:"E",scope:{metrics:"="},link:function(e,t,n){return createSVG(e,t),e.$watch("metrics",updateGraphPrecisionRecallCurve,!0)}}}]),createSVG=function(e,t){e.margin={top:20,right:20,bottom:30,left:20},e.w=400,e.h=300;if(e.svg==null)return e.svg=d3.select(t[0]).append("svg").attr("width",e.w).attr("height",e.h)},updateGraphRocCurve=function(e,t,n){var r,i,s;i=[];if(!e)return;return i=zip(e[0],e[1]),r=nv.models.lineChart(),r.xAxis.axisLabel("False-positive rate").tickFormat(d3.format(",r")),r.yAxis.axisLabel("True-positive rate").tickFormat(d3.format(",.2f")),s=function(){var e,t,n,r,s,o;n=[],t=[],r=1/i.length;for(e=s=0,o=i.length;0<=o?s<o:s>o;e=0<=o?++s:--s)n.push({x:i[e][0],y:i[e][1]}),t.push({x:r*e,y:r*e});return[{values:n,key:"ROC Curve",color:"#000eff","stroke-width":"10px"},{values:t,key:"line",color:"red","stroke-width":"1px","stroke-dasharray":"10,10"}]},n.svg.datum(s()).transition().duration(500).call(r),nv.utils.windowResize(r.update)},zip=function(){var e,t,n,r,i,s;r=function(){var t,n,r;r=[];for(t=0,n=arguments.length;t<n;t++)e=arguments[t],r.push(e.length);return r}.apply(this,arguments),n=Math.min.apply(Math,r),s=[];for(t=i=0;0<=n?i<n:i>n;t=0<=n?++i:--i)s.push(function(){var n,r,i;i=[];for(n=0,r=arguments.length;n<r;n++)e=arguments[n],i.push(e[t]);return i}.apply(this,arguments));return s},updateGraphPrecisionRecallCurve=function(e,t,n){var r,i,s;s=[];if(!e)return;return s=zip(e[0],e[1]),r=nv.models.lineChart(),r.xAxis.axisLabel("Recall").tickFormat(d3.format(",r")),r.yAxis.axisLabel("Precision").tickFormat(d3.format(",.2f")),i=function(){var e,t,n,r,i;n=[],t=1/s.length;for(e=r=0,i=s.length;0<=i?r<i:r>i;e=0<=i?++r:--r)n.push({x:s[e][0],y:s[e][1]});return[{values:n,key:"Precision-Recall curve",color:"#000eff","stroke-width":"10px"}]},n.svg.datum(i()).transition().duration(500).call(r),nv.utils.windowResize(r.update)},"use strict";var add_zero;angular.module("app.filters",[]).filter("interpolate",["version",function(e){return function(t){return String(t).replace(/\%VERSION\%/mg,e)}}]).filter("capfirst",[function(){return function(e){var t;return t=String(e),t[0].toUpperCase()+t.slice(1)}}]).filter("words",[function(){return function(e){var t;return t=String(e),t.split(/\W+/)}}]).filter("format_date",[function(){return function(e){var t,n,r,i,s,o;return n=new Date(e),t=add_zero(n.getDate()),i=add_zero(n.getMonth()+1),o=n.getFullYear(),r=add_zero(n.getHours()),s=add_zero(n.getMinutes()),t+"-"+i+"-"+o+" "+r+":"+s}}]),add_zero=function(e){return e<10&&(e="0"+e),e},"use strict";var LOCAL_SETTINGS;LOCAL_SETTINGS={apiUrl:"http://127.0.0.1:5000/cloudml/b/v1/"},angular.module("app.local_config",[]).constant("settings",LOCAL_SETTINGS),"use strict",angular.module("app.services",[]).factory("version",function(){return"0.1"})